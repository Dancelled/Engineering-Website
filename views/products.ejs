<!DOCTYPE html>
<html lang="en">
<%- include('includes/head') %>
<body>
  <%- include('includes/header') %>

  <main>
    <h2>Shop Our Collection</h2>

    <form action="/products" method="GET" class="search-form">
    <input type="text" name="search" placeholder="Search products..." class="search-bar" value="<%= search || '' %>">
    <button type="submit">Search</button>
    </form>

    <form action="/products" method="GET" class="sort-form">
      <input type="hidden" name="search" value="<%= search || '' %>">
      <select name="sort" class="sort-bar">
        <option value="">Sort by</option>
        <option value="low" <%= sort === "low" ? "selected" : "" %>>Price: Low to High</option>
        <option value="high" <%= sort === "high" ? "selected" : "" %>>Price: High to Low</option>
      </select>
      <button type="submit">Apply</button>
    </form>

    <nav class="category-nav">
        <a href="/products" class="<%= !category ? 'current' : '' %>">All</a>
        <a href="/products?category=Tops" class="<%= category === 'Tops' ? 'current' : '' %>">Tops</a>
        <a href="/products?category=Bottoms" class="<%= category === 'Bottoms' ? 'current' : '' %>">Bottoms</a>
        <a href="/products?category=Outerwear" class="<%= category === 'Outerwear' ? 'current' : '' %>">Outerwear</a>
    </nav>


    <div class="product-grid">
    <% products.forEach(product => { %>
        <a href="/products/<%= product.id %>" class="product-card">
        <img src="<%= product.image %>" alt="<%= product.name %>">
        <h3 class="product-name"><%= product.name %></h3>
        <p class="product-price">$<%= product.price.toFixed(2) %></p>
        <p class="product-category"><%= product.category %></p>
        </a>
    <% }) %>
    </div>
  </main>

  <%- include('includes/footer') %>
</body>
</html>